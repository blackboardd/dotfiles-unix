#!/bin/bash

if xrandr | grep -q 'eDP1 connected'; then
    xrandr --output eDP1 --primary --mode 1920x1080 --scale 0.75x0.75 --rate 144 --rotate normal
    xrandr --output HDMI-0 --off
    xrandr --output DP-0.1 --off
    xrandr --output DP-0.2 --off
    xrandr --output DP-0.3.1 --off
fi

if xrandr | grep -q 'DP-0.1 connected'; then
    xrandr --output DP-0.3.1 --mode 1920x1080 --pos 0x0 --scale 1x1 --rotate normal --rate 60
    xrandr --output DP-0.1 --primary --mode 1920x1080 --pos 1920x0 --rotate normal --rate 60
    xrandr --output DP-0.2 --mode 1920x1080 --pos 3840x0 --scale 1x1 --rotate normal --rate 60
fi

s="$(nvidia-settings -q CurrentMetaMode -t)"

if [[ "$s" != "" ]]; then
    s="${s#*" :: "}"
    nvidia-settings -a CurrentMetaMode="${s//\}/, ForceCompositionPipeline=On\}}"
fi

nitrogen --set-zoom-fill $HOME/.wallpapers/ultrawide-superultrawide-hd-wallpaper-02bcd837d38117a5fbce41ac5619d417.jpg

setxkbmap -option ctrl:nocaps
setxkbmap -option caps:escape
xmodmap -e "clear lock"
xmodmap -e "keycode 64 = Mode_switch"
xmodmap -e "keycode 43 = h H Left H"
xmodmap -e "keycode 44 = j J Down J"
xmodmap -e "keycode 45 = k K Up K"
xmodmap -e "keycode 46 = l L Right L"
xmodmap -e "keycode 66 = Escape NoSymbol Escape"

# if RAZER_MOUSE_SPEED_PROP exists, run the below command
if [ "$RAZER_MOUSE_SPEED_PROP" != "" ]; then
    xinput --set-prop "pointer:Razer Razer DeathAdder V2" "$RAZER_MOUSE_SPEED_PROP" -0.8
fi

if [ "$VERTI_MOUSE_SPEED_PROP" != "" ]; then
    xinput --set-prop "MOSART Semi. 2.4G Wireless Mouse" "$VERTI_MOUSE_SPEED_PROP" -0.8
fi
